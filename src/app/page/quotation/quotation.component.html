<main>
   
<form class="mt-4">
        <h3> Buscar cliente</h3>
    <div class="row">
        <div class="col">
            <label class="form-control-lg mt-3">Cliente</label>
            <input type="text" placeholder="Cliente (DPI)" [(ngModel)]='cotizacion.dpiBusqueda' name="cliente"
                class="form-control">
        </div>
        <div class="col">
        <input class="btn btn-info" type="submit" name="" id="" value="Buscar cliente"
            (click)="buscarCliente()">
        </div>
    </div>
</form>

    
 <mat-card class="w-45">
    <mat-card-content>
        <h4 class="mb-25">Clientes</h4>
        <div class="table-responsive">
            <table mat-table [dataSource]="users" class="text-nowrap w-100">
                <!-- Assigned Column -->
                <ng-container matColumnDef="Nombre">
                    <th mat-header-cell *matHeaderCellDef> Nombre </th>
                    <td mat-cell *matCellDef="let element">
                        <p class="mb-0 fw-medium">{{ element.nombre }}</p>
                        <p class="mb-0 fw-normal op-5">{{ element.apellido }}</p>
                    </td>
                </ng-container>
                <!-- Id Column -->
                <ng-container matColumnDef="DPI">
                    <th mat-header-cell *matHeaderCellDef> DPI </th>
                    <td mat-cell class="fw-medium" *matCellDef="let element"  > {{element.dpi}} </td>
                </ng-container>

                <ng-container matColumnDef="NIT">
                    <th mat-header-cell *matHeaderCellDef> NIT </th>
                    <td mat-cell class="fw-medium" *matCellDef="let element"> {{element.NumNit}} </td>
                </ng-container>

                <ng-container matColumnDef="Direccion">
                    <th mat-header-cell *matHeaderCellDef> Direccion </th>
                    <td mat-cell class="fw-medium" *matCellDef="let element"> {{element.direccion}} </td>
                </ng-container>
                <ng-container matColumnDef="Telefono">
                    <th mat-header-cell *matHeaderCellDef> Telefono </th>
                    <td mat-cell class="fw-medium" *matCellDef="let element" > {{element.telefono}} </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
              <!-- Budget Column -->
              <ng-container matColumnDef="Botones">
                <th mat-header-cell *matHeaderCellDef> </th>
                <td mat-cell *matCellDef="let element">
                    <button mat-raised-button class="me-8 mb-8" color="primaryid"  
                    (click)="seleccionarCliente(element.id)">Seleccionar</button>
                </td>
            </ng-container>
            </table>
        </div>
    </mat-card-content>
</mat-card>

<form class="mt-4">
    <h3> Buscar Vehiculo</h3>
<div class="row">
    <div class="col">
        <label class="form-control-lg mt-3">Modelo</label>
        <input type="text" placeholder="Vehiculo (modelo)" [(ngModel)]='cotizacion.vehiculoBusqueda' name="vehiculo"
            class="form-control">
    </div>
    <div class="col">
    <input class="btn btn-info" type="submit" name="" id="" value="Buscar vehiculo"
        (click)="buscarVehiculo()">
    </div>
</div>
</form>

<mat-card class="w-45">
    <mat-card-content>
        <h4 class="mb-25">Vehiculo</h4>
        <div class="table-responsive">
            <table mat-table [dataSource]="vehicle" class="text-nowrap w-100">
                <!-- Assigned Column -->
                <ng-container matColumnDef="Vehiculo">
                    <th mat-header-cell *matHeaderCellDef> Vehiculo </th>
                    <td mat-cell *matCellDef="let element">
                        <p class="mb-0 fw-medium">{{ element.marca }}</p>
                        <p class="mb-0 fw-normal op-5">{{ element.modelo }}</p>
                    </td>
                </ng-container>
                <!-- Id Column -->
                <ng-container matColumnDef="Tipo">
                    <th mat-header-cell *matHeaderCellDef> Tipo </th>
                    <td mat-cell class="fw-medium" *matCellDef="let element"  > {{element.tipo}} </td>
                </ng-container>

                <ng-container matColumnDef="Color">
                    <th mat-header-cell *matHeaderCellDef> Color </th>
                    <td mat-cell class="fw-medium" *matCellDef="let element"> {{element.color}} </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns2"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns2;"></tr>
              <!-- Budget Column -->
              <ng-container matColumnDef="Botones">
                <th mat-header-cell *matHeaderCellDef> </th>
                <td mat-cell *matCellDef="let element">
                    <button mat-raised-button class="me-8 mb-8" color="primaryid"  
                    (click)="seleccionarVehiculo(element.id)">Seleccionar</button>
                </td>
            </ng-container>
            </table>
        </div>
    </mat-card-content>
</mat-card>


<div class="formulario">

    <div class="container pt-4">
        <div class="row">
            <div class="col-lg-6">
                <h3> Calculo de cuotas</h3>
                <form class="mt-4">
                    <div class="row">
                        <div class="col">
                            <label>Monto</label>
                            <input type="number" placeholder="Monto" [(ngModel)]='cotizacion.monto' name="monto"
                                class="form-control">
                        </div>
                        <div class="col">
                            <label>Cuota Deseada</label>
                            <input type="number" placeholder="Cuota desada" [(ngModel)]='cotizacion.cuotaDeseada'
                                name="cuotaDeseada" class="form-control">
                        </div>
                    </div>
                    <div class="col">
                        <label class="form-control-lg mt-3">Tipo de interes</label>
                    </div>
                    <div class="col">
                        <div class="form-check form-check-inline">
                            <label class="form-check-label" for="">Interes Fijo</label>
                            <input name="interes" (click)="tipoInteres(1)" type="radio">
                        </div>
                        <label class="form-check-label" for="">Interes Porcentaje</label>
                        <input name="interes" (click)="tipoInteres(2)" type="radio">
                    </div>

                    <div *ngIf="cotizacion.interesTipo==1" class="fijo">
                        <input type="number" class="form-check form-check-inline" type="text" placeholder="Interes Fijo"
                            [(ngModel)]='cotizacion.interesFijo' name="interesFijo" class="form-control">
                    </div>

                    <div *ngIf="cotizacion.interesTipo==2" class="porcentaje">
                        <select class="form-check form-check-inline" [(ngModel)]='cotizacion.interesPorcentaje'
                            name="interesPorcentaje" class="form-control">
                            <option value="0.03">3%</option>
                            <option value="0.05">5%</option>
                            <option value="0.10">10%</option>
                            <option value="0.15">15%</option>
                            <option value="0.20">20%</option>
                        </select>
                    </div>
                    <div class="row">
                        <div class="col">
                            <label class="form-control-lg mt-3">Fecha de pago</label>
                            <input type="date" placeholder="Fecha de pago" [(ngModel)]='cotizacion.fechaPago'
                                name="fechaPago" class="form-control">
                        </div>
                        <div class="col">
                            <label class="form-control-lg mt-3">Periodo de pago</label>
                            <select name="periodoPagos" [(ngModel)]='cotizacion.periodoPago' name="periodoPago"
                                class="form-control">
                                <option value="mensual">Mensual</option>
                                <option value="quincenal">Quincenal</option>
                                <option value="semanal">Semanal</option>
                            </select>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col">
                            <label class="form-control-lg mt-3">Foto veiculo</label>
                            <input type="text" placeholder="Foto" [(ngModel)]='cotizacion.foto' name="foto"
                                class="form-control">
                        </div>
                    </div>

                    <div class="mt-3">
                        <input class="btn btn-info" type="submit" name="" id="" value="calcular"
                            (click)="comprobacionDatos()">
                    </div>

                </form>
            </div>
        </div>
    </div>

</div>

<div>

    <!---   
<label *ngFor="let pagos of cot.pagos">
lista {{pagos.fecha| json}}
</label>
-->
</div>


<div class="container mt-4">
    <div class="card">
        <div class="card-body">
            <span class="h3"> Formulario Cotizacion </span>
            <table class="table table-striped mt-5">
                <thead>
                    <tr>
                        <th>Id del cliente </th>
                        <td>{{cot.idCliente}}</td>
                    </tr>
                </thead>
                <thead>
                    <tr>
                        <th>Fecha de pago</th>
                        <th>Cuota Fija</th>
                        <th>Interes</th>
                        <th>Capital</th>
                        <th>Saldo</th>
                        <th>Firma</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let pagos of cot.pagos">
                        <td>{{pagos.fechaPago| json}}</td>
                        <td>{{pagos.cuotaCotizacion| json}}</td>
                        <td>{{pagos.interesCotizacion| json}}</td>
                        <td>{{pagos.capitalCotizacion| json}}</td>
                        <td>{{pagos.saldoCotizacion| json}}</td>
                        <td>{{pagos.firmaPago| json}}</td>
                        <td></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
</main>