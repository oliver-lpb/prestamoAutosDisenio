<main>
   <div class="fondo">
    <form class="mt-4 " >
        <h3> Buscar cliente</h3>
    <div class="row">
        <div class="col">
           
            <mat-form-field class="w-100 fs-16" appearance="outline">
                <mat-label>DPI</mat-label>
                <input matInput type="text" placeholder="Introducir DPI" [(ngModel)]='cotizacion.dpiBusqueda'
                name="cliente" class="form-control">
               
            </mat-form-field>

           
        </div>
        <div class="col">
            <button (click)="buscarCliente()" mat-raised-button class="me-8 mb-8" color="primary" 
            type="submit">Buscar Cliente</button>
        
           
        </div>
    </div>
 </form>

    
 <mat-card class="w-45">
    <mat-card-content>
        <h4 class="mb-25">Clientes</h4>
        <div class="table-responsive">
            <table mat-table [dataSource]="users" class="text-nowrap w-100">
                <!-- Assigned Column -->
                <ng-container matColumnDef="Nombre">
                    <th mat-header-cell *matHeaderCellDef> Nombre </th>
                    <td mat-cell *matCellDef="let element">
                        <p class="mb-0 fw-medium">{{ element.nombre }}</p>
                        <p class="mb-0 fw-normal op-5">{{ element.apellido }}</p>
                    </td>
                </ng-container>
                <!-- Id Column -->
                <ng-container matColumnDef="DPI">
                    <th mat-header-cell *matHeaderCellDef> DPI </th>
                    <td mat-cell class="fw-medium" *matCellDef="let element"  > {{element.dpi}} </td>
                </ng-container>

                <ng-container matColumnDef="NIT">
                    <th mat-header-cell *matHeaderCellDef> NIT </th>
                    <td mat-cell class="fw-medium" *matCellDef="let element"> {{element.NumNit}} </td>
                </ng-container>

                <ng-container matColumnDef="Direccion">
                    <th mat-header-cell *matHeaderCellDef> Direccion </th>
                    <td mat-cell class="fw-medium" *matCellDef="let element"> {{element.direccion}} </td>
                </ng-container>
                <ng-container matColumnDef="Telefono">
                    <th mat-header-cell *matHeaderCellDef> Telefono </th>
                    <td mat-cell class="fw-medium" *matCellDef="let element" > {{element.telefono}} </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
              <!-- Budget Column -->
              <ng-container matColumnDef="Botones">
                <th mat-header-cell *matHeaderCellDef> </th>
                <td mat-cell *matCellDef="let element">
                    <button mat-raised-button class="me-8 mb-8" color="primaryid"  
                    (click)="seleccionarCliente(element.id, 
                    element.nombre, element.apellido, element.dpi, element.direccion, element.telefono)">Seleccionar</button>
                </td>
            </ng-container>
            </table>
        </div>
    </mat-card-content>
</mat-card>

   </div>

<br>

   <div class="fondo">


    <form class="mt-4 ">
        <h3> Buscar Vehiculo</h3>
    <div class="row">
        <div class="col">
            <mat-form-field class="w-100 fs-16" appearance="outline">
                <mat-label>Modelo del vehiculo</mat-label>
                <input matInput type="text" placeholder="Modelo del vehiculo"
                [(ngModel)]='cotizacion.vehiculoBusqueda'
                name="vehiculo" class="form-control">   
            </mat-form-field>
            
        </div>
        <div class="col">
            <button (click)="buscarVehiculo()" mat-raised-button class="me-8 mb-8" color="primary" 
            type="submit">Buscar vehiculo</button>
    
      
        </div>
    </div>
    </form>
    
    <mat-card class="w-45 fondo">
        <mat-card-content>
            <h4 class="mb-25">Vehiculo</h4>
            <div class="table-responsive">
                <table mat-table [dataSource]="vehicle" class="text-nowrap w-100">
                    <!-- Assigned Column -->
                    <ng-container matColumnDef="Vehiculo">
                        <th mat-header-cell *matHeaderCellDef> Vehiculo </th>
                        <td mat-cell *matCellDef="let element">
                            <p class="mb-0 fw-medium">{{ element.nombre}}</p>
                            <p class="mb-0 fw-normal op-5">{{ element.marca }}</p>
                        </td>
                    </ng-container>
                    <!-- Id Column -->
                    <ng-container matColumnDef="Tipo">
                        <th mat-header-cell *matHeaderCellDef> Tipo </th>
                        <td mat-cell class="fw-medium" *matCellDef="let element"  > {{element.tipo}} </td>
                    </ng-container>
    
                    <ng-container matColumnDef="Color">
                        <th mat-header-cell *matHeaderCellDef> Color </th>
                        <td mat-cell class="fw-medium" *matCellDef="let element"> {{element.color}} </td>
                    </ng-container>
    
                    <tr mat-header-row *matHeaderRowDef="displayedColumns2"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns2;"></tr>
                  <!-- Budget Column -->
                  <ng-container matColumnDef="Botones">
                    <th mat-header-cell *matHeaderCellDef> </th>
                    <td mat-cell *matCellDef="let element">
                        <button mat-raised-button class="me-8 mb-8" color="primaryid"  
                        (click)="seleccionarVehiculo(element.id, element.nombre, element.modelo, element.marca, element.color)">Seleccionar</button>
                    </td>
                </ng-container>
                </table>
            </div>
        </mat-card-content>
    </mat-card>
    

   </div>
<br>

<div class="formulario fondo" >

    <div class="container pt-4">
        <div class="row">
            <div class="col-lg-6">
                <h3> Calculo de cuotas</h3>
                <form class="mt-4">
                    <div class="row">
                        <div class="col">

                            <mat-form-field class="w-100 fs-16" appearance="outline">
                                <mat-label>Monto</mat-label>
                                <input matInput type="number" placeholder="Monto" [(ngModel)]='cotizacion.monto' name="monto" class="form-control">
                
                               
                            </mat-form-field>


                        </div>
                        <div class="col">
                            <mat-form-field class="w-100 fs-16" appearance="outline">
                                <mat-label>Cuota Deseada</mat-label>
                                <input matInput type="number" placeholder="Cuota desada" [(ngModel)]='cotizacion.cuotaDeseada'
                                name="cuotaDeseada" class="form-control">
                               
                            </mat-form-field>

                        </div>
                    </div>
                    <div class="col">
                        <mat-label><h3>Tipo de interes</h3></mat-label>
                    </div>
                    <div class="col">
                        <div class="form-check form-check-inline">
                            <label class="form-check-label" for=""><p>Interes Fijo<p></label>
                            
                            <input name="interes" (click)="tipoInteres(1)" type="radio">
                        </div>
                        <br>
                        <label class="form-check-label" for=""><p>Interes Porcentaje<p></label>
                        <br>
                        <input name="interes" (click)="tipoInteres(2)" type="radio">
                    </div>

                    <div *ngIf="cotizacion.interesTipo==1" class="fijo">
                        <mat-form-field class="w-100 fs-16" appearance="outline">
                            <input matInput type="number" class="form-check form-check-inline" type="text" placeholder="Interes fijo"  
                            [(ngModel)]='cotizacion.interesFijo' name="interesFijo" class="form-control">
                        </mat-form-field>

                    </div>
                    <br>
                    <div *ngIf="cotizacion.interesTipo==2" class="porcentaje">
                        <select class="form-check form-check-inline" [(ngModel)]='cotizacion.interesPorcentaje'
                            name="interesPorcentaje" class="form-control">
                            <option value="0.01 ">1%</option>
                            <option value="0.02">2%</option>
                            <option value="0.03">3%</option>
                            <option value="0.04">4%</option>
                            <option value="0.05">5%</option>
                            <option value="0.06">6%</option>
                            <option value="0.07">7%</option>
                            <option value="0.08">8%</option>
                            <option value="0.09">9%</option>
                            <option value="0.10">10%</option>
                            <option value="0.11">11%</option>
                            <option value="0.12">12%</option>
                            <option value="0.13">13%</option>
                            <option value="0.14">14%</option>
                            <option value="0.15">15%</option>
                            <option value="0.16">16%</option>
                            <option value="0.17">17%</option>
                            <option value="0.18">18%</option>
                            <option value="0.19">19%</option>
                            <option value="0.20">20%</option>
                        </select>  
                    </div>

                    <br>
                    <div class="row">
                        <div class="col">
                            <label class="form-control-lg mt-3"> <p>Fecha de pago</p> </label> <br>
                            <input type="date" placeholder="Fecha de pago" [(ngModel)]='cotizacion.fechaPago'
                                name="fechaPago" class="form-control">
                        </div>
                        <br>
                        <div class="col">
                            <label class="form-control-lg mt-3"> <p>Periodo de pago</p> </label> <br>
                            <select name="periodoPagos" [(ngModel)]='cotizacion.periodoPago' name="periodoPago"
                                class="form-control">
                                <option value="mensual">Mensual</option>
                                <option value="quincenal">Quincenal</option>
                                <option value="semanal">Semanal</option>
                            </select>
                        </div>
                    </div>
                    <mat-form-field class="w-100 fs-16" appearance="outline">
                        <mat-label>Mora</mat-label>
                        <input matInput type="number" placeholder="Mora" [(ngModel)]='cotizacion.mora' name="monto" class="form-control"> 
                        </mat-form-field>
                    <br>
                    <div class="mt-3">
                        <button (click)="comprobacionDatos()" mat-raised-button class="me-8 mb-8" color="primary" type="submit">calcular</button>
                    </div>

                </form>
            </div>
        </div>
    </div>

</div>
 <br>

<div>

</div>

<div class="container mt-4 fondo">
    <div class="card">
        <div class="card-body">
            <span class="h3"> Formulario Cotizacion </span>
            <table class="table table-striped mt-5" id="table">
                <thead>
                    <tr>
                        <th>Fecha de pago</th>
                        <th>Cuota Fija</th>
                        <th>Interes</th>
                        <th>Capital</th>
                        <th>Saldo</th>
                        <th>Estado</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let pagos of cot.pagos">
                        <td>{{pagos.fechaPago| json}}</td>
                        <td>{{pagos.cuotaCotizacion| json}}</td>
                        <td>{{pagos.interesCotizacion| json}}</td>
                        <td>{{pagos.capitalCotizacion| json}}</td>
                        <td>{{pagos.saldoCotizacion| json}}</td>
                        <td>{{pagos.firmaPago| json}}</td>
                        <td></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <button mat-raised-button class="me-8 mb-8" color="primary"  
                        (click)="generarPDF()">Imprimir PDF</button>
                        <button mat-raised-button class="me-8 mb-8" color="primary"  
                        (click)="guardarCotizacion(cot) ">Generar Venta</button>
</div>
</main>